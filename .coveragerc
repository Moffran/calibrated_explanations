# Shared coverage configuration enforced by ADR-019

[run]
branch = True
source =
    src/calibrated_explanations
omit =
    tests/*
    docs/*
    notebooks/*
    benchmarks/*
    scripts/*
    evaluation/*
    setup.py
    # Exclude viz adapter from coverage due to matplotlib lazy loading conflicts
    # with pytest-cov instrumentation. See ADR-023 for rationale.
    src/calibrated_explanations/viz/matplotlib_adapter.py
    # Exclude legacy compatibility shims - deprecated modules that just re-export
    src/calibrated_explanations/_interval_regressor.py
    src/calibrated_explanations/_plots.py
    src/calibrated_explanations/_plots_legacy.py
    src/calibrated_explanations/_venn_abers.py
parallel = False

[paths]
calibrated_explanations =
    src/calibrated_explanations
    */site-packages/calibrated_explanations

[report]
fail_under = 88
show_missing = True
skip_covered = False
precision = 1
# Patterns we intentionally exclude from coverage accounting because they
# represent defensive programming or module entry points rather than runtime
# logic exercised in production. Keep this list short and documented.
exclude_lines =
    pragma: no cover
    if __name__ == .__main__.
    if TYPE_CHECKING:
    raise NotImplementedError

[html]
directory = coverage_html
